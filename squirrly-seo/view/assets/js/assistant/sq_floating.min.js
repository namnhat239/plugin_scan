(function($){$.fn.sq_floating=function(options){var $this=this;var settings=$.extend({positions:[],minimize_height:60,maximize_height:100,top:53,bottom:0},options);$.sq_fields=$.extend({wp_form:$(".metabox-location-normal").length>0?$(".metabox-location-normal"):$("#side-sortables"),sq_box_close:$.sq_config.div.find(".sq_box_close"),sq_box_minimize:$.sq_config.div.find(".sq_box_minimize"),sq_box_maximize:$.sq_config.div.find(".sq_box_maximize"),sq_button_squirrly:$(".edit__PinnedPluginIcon-hNdeXr")},$.sq_fields);$.expr.filters.slaoffscreen=function(el){var rect=el.getBoundingClientRect();return rect.x+rect.width<0||rect.y+rect.height<0||(rect.x>window.innerWidth||rect.y>window.innerHeight)};$this.init=function(){var dragposition="";$.sq_config.div.find("#sq_options").remove();$.sq_config.div.addClass("sq_sticky");$.sq_config.div.addClass("minimized");$.sq_fields.sq_box_minimize.hide();$.sq_fields.sq_box_close.show();$.sq_fields.sq_box_maximize.show();$("#wpbody").prepend($.sq_config.div);var positions=JSON.parse(localStorage.positions||"{}");$(function(){$.each(positions,function(id,pos){$.sq_config.div.css(pos)});$.sq_config.div.css("height",settings.minimize_height);$.sq_config.div.css("top","auto");if($.fn.draggable){$.sq_config.div.draggable({containment:"body",handle:".sq_header",scroll:true,axis:"x",stop:function(event,ui){positions[this.id]=ui.position;localStorage.positions=JSON.stringify(positions)}})}});$.sq_fields.sq_box_minimize.on("click",function(e){e.stopPropagation();$.sq_config.div.css("height",settings.minimize_height+"px");$.sq_config.div.css("bottom",settings.bottom+"px");$.sq_config.div.css("top","auto");$.sq_config.div.addClass("minimized");$.sq_fields.sq_box_minimize.hide();$.sq_fields.sq_box_maximize.show()});$.sq_fields.sq_box_close.on("click",function(){$.sq_config.div.hide();$.sq_setCookie("sq_sla","off");$(".components-squirrly-icon").show()});if($.sq_getCookie("sq_sla")==="off"){$.sq_fields.sq_box_close.trigger("click")}$.sq_fields.sq_box_maximize.on("click",function(){$.sq_config.div.show();if($.sq_config.div.hasClass("minimized")){$.sq_config.div.css("top",settings.top+"px");$.sq_config.div.css("height","auto");$.sq_config.div.css("bottom",0);$.sq_config.div.removeClass("minimized");$.sq_fields.sq_box_minimize.show();$.sq_fields.sq_box_maximize.hide()}});$.sq_fields.sq_keyword.on("click",function(){if($.sq_config.div.hasClass("minimized")){$.sq_fields.sq_box_maximize.trigger("click")}});$(".editor-writing-flow").css("height","auto");$(window).resize(function(){if($.sq_config.div.is(":slaoffscreen")){$.sq_config.div.css("left","auto");$.sq_config.div.css("right","0px")}})};$this.one("seo.loaded",function(){if($(".editor-post-title").find("textarea").length>0){$.sq_fields.wp_input_title=$(".editor-post-title").find("textarea")}else if($("h1.wp-block-post-title").length&&!$("#title").length){var $h1title=$("h1.wp-block-post-title");$.sq_fields.wp_input_title=$('<textarea id="title" style="display: none">'+$h1title.html()+"</textarea>");$h1title.after($.sq_fields.wp_input_title);$h1title.on("DOMSubtreeModified",function(){$.sq_fields.wp_input_title.val($h1title.html())})}$this.on("seo.floating.page_saved",function(){$.sq_savePost()});$.sq_editor.createEditorButton("components-squirrly-icon");if($(".components-squirrly-icon").length>0){if(!$.sq_config.div.is(":visible")&&!$(".components-squirrly-icon").is(":visible")){$(".components-squirrly-icon").show()}$(".components-squirrly-icon").off("click").on("click",function(){if($.sq_config.div.is(":visible")){$.sq_config.div.hide();$(".components-squirrly-icon").show();$.sq_setCookie("sq_sla","off")}else{$.sq_config.div.show();$(".components-squirrly-icon").hide();$.sq_setCookie("sq_sla","on")}})}else{$.sq_config.div.show()}});if($.sq_config.div.is(":slaoffscreen")){$.sq_config.div.css("left","auto");$.sq_config.div.css("right","0px")}return $this}})(jQuery);