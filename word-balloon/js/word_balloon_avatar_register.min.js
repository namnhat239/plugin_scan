document.getElementById("w_b_avatar_clear")&&document.getElementById("w_b_avatar_clear").addEventListener("click",(function(e){document.getElementById("w_b_avatar_clear").style.visibility="hidden",document.getElementById("w_b_register_avatar_img").src=document.getElementById("w_b_mystery_men_url").value,document.getElementById("w_b_avatar_src").value="",document.getElementById("w_b_avatar_src_id").value=""})),document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".next-page.button")&&(document.querySelector(".next-page.button").onclick=function(){word_balloon_in_loading()}),document.querySelector(".last-page.button")&&(document.querySelector(".last-page.button").onclick=function(){word_balloon_in_loading()}),document.querySelector(".prev-page.button")&&(document.querySelector(".prev-page.button").onclick=function(){word_balloon_in_loading()}),document.querySelector(".first-page.button")&&(document.querySelector(".first-page.button").onclick=function(){word_balloon_in_loading()})})),function(){var frame=wp.media({title:translations_word_balloon.select_an_avatar,library:{type:"image"},button:{text:translations_word_balloon.select},multiple:!1}),custom_uploader;function word_balloon_regist_avatar(e,fn){e.preventDefault(),custom_uploader?custom_uploader.open():(custom_uploader=frame,custom_uploader.on("select",(function(){var images=custom_uploader.state().get("selection");images.each((function(file){var select_image_avatar_url,max_size=512;document.getElementById("w_b_max_avatar_dimensions")&&(max_size=Number(document.getElementById("w_b_max_avatar_dimensions").value)),select_image_avatar_url=file.attributes.width<=max_size?file.attributes.sizes.full.url:void 0!==file.attributes.sizes.large&&file.attributes.sizes.large.width<=max_size?file.attributes.sizes.large.url:void 0!==file.attributes.sizes.medium&&file.attributes.sizes.medium.width<=max_size?file.attributes.sizes.medium.url:void 0!==file.attributes.sizes.thumbnail&&file.attributes.sizes.medium.width<=max_size?file.attributes.sizes.thumbnail.url:file.attributes.sizes.full.url,document.getElementById("w_b_avatar_src_id").value=file.attributes.id,eval(fn+"(select_image_avatar_url)")}))})),custom_uploader.open())}function word_balloon_registered_avatar(e){document.getElementById("w_b_avatar_src").value=e,document.getElementById("w_b_register_avatar_img").src=e,document.getElementById("w_b_avatar_clear").style.visibility="visible"}function word_balloon_re_registered_avatar(e){document.getElementById("w_b_re_avatar_src").value=e}document.addEventListener("DOMContentLoaded",(function(){for(var select_avatar=document.querySelectorAll(".w_b_select_avatar_image_button"),i=0;i<select_avatar.length;i++)select_avatar[i].addEventListener("click",(function(e){word_balloon_regist_avatar(e,"word_balloon_registered_avatar")}))}));for(var w_b_delete_link_list=document.querySelectorAll(".delete_link"),i=0;i<w_b_delete_link_list.length;i++)w_b_delete_link_list[i].addEventListener("click",(function(e){confirm(translations_word_balloon.do_you_want_to_delete)?word_balloon_in_loading():e.preventDefault()}));function word_balloon_bulk_delete(e){var s;if("doaction"===e.submitter.id?s=document.getElementById("bulk-action-selector-top"):"doaction2"===e.submitter.id&&(s=document.getElementById("bulk-action-selector-bottom")),"delete-selected"!==(s=s.options[s.selectedIndex].value))return e.preventDefault(),void word_balloon_pop_up_message(translations_word_balloon.pop_up_select_bulk_action,"#ffc107");for(var answer=!1,w_b_avatar_delete_lists=document.querySelectorAll(".w_b_avatar_delete_lists"),i=0;i<w_b_avatar_delete_lists.length;i++)w_b_avatar_delete_lists[i].checked&&(answer=!0);if(!answer)return e.preventDefault(),void word_balloon_pop_up_message(translations_word_balloon.pop_up_select_avatar_checkbox,"#ffc107");confirm(translations_word_balloon.really_remove_avatar)?word_balloon_in_loading():e.preventDefault()}document.getElementById("avatars-filter").addEventListener("submit",word_balloon_bulk_delete),jQuery((function($){var original_tr,original_td,renewal_html,w_b_tr_close=function(){original_tr.removeClass("w_b_tr_selected"),jQuery(".w_b_edit_selected").remove(),jQuery(".hidden").remove(),original_tr.css("display","table-row")};function word_balloon_update_avatar(){var datauri=!1;document.querySelector('input[name="w_b_avatar_data_uri_re"]')&&(datauri=document.querySelector('input[name="w_b_avatar_data_uri_re"]').checked);var send_data={action:word_balloon_nonce_ajax_object.action,nonce:word_balloon_nonce_ajax_object.nonce,text:document.querySelector('input[name="w_b_avatar_text_re"]').value,url:document.querySelector('input[name="w_b_avatar_src_re"]').value,id:document.querySelector('input[name="w_b_avatar_id_re"]').value,datauri:datauri,priority:document.querySelector('input[name="w_b_avatar_priority_re"]').value,name:document.querySelector('input[name="w_b_avatar_name_re"]').value,originalid:document.querySelector('input[name="w_b_avatar_id_original"]').value},xhr=new XMLHttpRequest,w_b_loader=document.getElementsByClassName("w_b_loader");xhr.onreadystatechange=function(){if(4===xhr.readyState){var w_b_json_data=JSON.parse(xhr.response);w_b_loader[0].classList.remove("is-active"),200===xhr.status?200===w_b_json_data.status?(word_balloon_pop_up_message(w_b_json_data.message,"#28a745"),original_tr[0].innerHTML=w_b_json_data.column,w_b_tr_close()):word_balloon_pop_up_message(translations_word_balloon.pop_up_failed+"<br>"+w_b_json_data.message,"#dc3848"):word_balloon_pop_up_message(w_b_json_data.message,"#dc3848")}else w_b_loader[0].classList.add("is-active"),word_balloon_pop_up_message(translations_word_balloon.pop_up_updating,"#868e96")},xhr.open("POST",word_balloon_nonce_ajax_object.ajax_url,!0),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.send(word_balloon_encodeURI(send_data))}jQuery("#the-list").on("click","a.w_b_editinline",(function(){jQuery("#the-list").children().hasClass("w_b_edit_selected")&&w_b_tr_close(),original_tr=jQuery(this).closest("tr"),original_td=original_tr.find("td"),renewal_html="function"==typeof window.word_balloon_pro_avatar_change_registered_data?word_balloon_pro_avatar_change_registered_data(original_tr,original_td):'<tr class="hidden"></tr><tr class="w_b_edit_selected"><th scope="row" class="check-column"></th><td colspan="5"><fieldset class="w_b_inline-edit-col-left"><legend class="inline-edit-legend">'+translations_word_balloon.edit_avatar+'</legend><div class="inline-edit-col"><label><span class="title">ID</span><span class="input-text-wrap"><input type="number" name="w_b_avatar_id_re" class="ptitle w_b_avatar_id_re w_b_inline_edit_input_submit" value="'+original_tr.find("input").val()+'" min="1" max="9999" required></span></label><label><span class="title">'+translations_word_balloon.edit_avatar_name+'</span><span class="input-text-wrap"><input type="text" name="w_b_avatar_name_re" class="ptitle w_b_inline_edit_input_submit" value="'+original_td.find("span.column_avatar_name").text()+'" maxlength="50"></span></label><label><span class="title">'+translations_word_balloon.edit_avatar_note+'</span><span class="input-text-wrap"><input type="text" name="w_b_avatar_text_re" class="ptitle w_b_inline_edit_input_submit" value="'+original_td.find("span.column_avatar_text").text()+'" maxlength="100" /></span></label><input type="hidden" name="w_b_avatar_priority_re" value="'+parseInt(original_tr.find("td.priority.column-priority").text())+'" /><input type="hidden" name="w_b_avatar_src_re" value="'+original_tr.find("img.w_b_avatar_list_img").attr("src")+'" /><input type="hidden" name="w_b_avatar_id_original" class="ptitle" value="'+original_tr.find("input").val()+'" /><div class="w_b_save_cancel_box"><button type="button" class="button cancel alignleft">'+translations_word_balloon.edit_avatar_cancel+'</button> <button type="button" class="button button-primary save alignright">'+translations_word_balloon.edit_avatar_update+'</button> <span class="w_b_loader"></span></div></div></fieldset></td></tr>',original_tr.addClass("w_b_tr_selected"),original_tr.after(renewal_html),original_tr.css("display","none"),document.getElementById("w_b_re_avatar")&&document.getElementById("w_b_re_avatar").addEventListener("click",(function(e){word_balloon_regist_avatar(e,"word_balloon_re_registered_avatar")}))})),jQuery("#the-list").on("click","button.cancel",(function(){w_b_tr_close()})),jQuery(document).on("click","button.save",(function(){word_balloon_update_avatar()})),jQuery(document).on("input",".w_b_avatar_text_re",(function(e){var halfVal=jQuery(this).val().replace(/[！-～]/g,(function(tmpStr){return String.fromCharCode(tmpStr.charCodeAt(0)-65248)}));jQuery(this).val(halfVal.replace(/[^0-9]/g,"")),this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength))})),jQuery(document).on("input",".w_b_avatar_priority_re",(function(e){var halfVal=jQuery(this).val().replace(/[！-～]/g,(function(tmpStr){return String.fromCharCode(tmpStr.charCodeAt(0)-65248)}));jQuery(this).val(halfVal.replace(/[^0-9]/g,"")),this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength))})),jQuery(document).on("keypress","input:not(.allow_submit)",(function(event){return 13!==event.which}))}))}();