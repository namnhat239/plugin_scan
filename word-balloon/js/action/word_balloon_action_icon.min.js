function word_balloon_get_icon_type(){return word_balloon_get_select_option_value("w_b_edit_icon_type")}function word_balloon_get_icon_size(){return word_balloon_get_select_option_value("w_b_edit_icon_size")}function word_balloon_get_icon_position(){for(var e=document.getElementsByName("icon_position"),icon_position="",i=e.length;i--;)if(e[i].checked){icon_position=e[i].value;break}return icon_position}function word_balloon_get_icon_flip(){return document.getElementById("w_b_icon_flip_h").checked&&document.getElementById("w_b_icon_flip_v").checked?"hv":document.getElementById("w_b_icon_flip_h").checked?"h":document.getElementById("w_b_icon_flip_v").checked?"v":""}function word_balloon_get_icon_effect(){return document.getElementById("w_b_edit_icon_effect")?word_balloon_get_select_option_value("w_b_edit_icon_effect"):""}function word_balloon_get_icon_filter(){return document.getElementById("w_b_edit_icon_filter")?word_balloon_get_select_option_value("w_b_edit_icon_filter"):""}function word_balloon_get_icon_in_view(){return document.getElementById("w_b_edit_icon_in_view")?word_balloon_get_select_option_value("w_b_edit_icon_in_view"):""}function word_balloon_set_icon_type(){var icon=word_balloon_get_icon_type();if(""!==icon){var x=new XMLHttpRequest;x.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var svg=x.responseText,icon=word_balloon_get_icon_type(),icon_data=document.getElementById("custom_icon_"+icon),fill=icon_data.getAttribute("data-fill"),stroke=icon_data.getAttribute("data-stroke"),stroke_width=icon_data.getAttribute("data-stroke_width");if("true"===document.getElementById("w_b_restore_load").value){var w_b_restore=document.getElementById("w_b_restore");""!==w_b_restore.getAttribute("data-icon_fill")&&(fill=w_b_restore.getAttribute("data-icon_fill")),""!==w_b_restore.getAttribute("data-icon_stroke")&&(stroke=w_b_restore.getAttribute("data-icon_stroke")),""!==w_b_restore.getAttribute("data-icon_stroke_width")&&(stroke_width=w_b_restore.getAttribute("data-icon_stroke_width"))}document.getElementById("w_b_edit_icon_fill_color")&&(document.getElementById("w_b_edit_icon_fill_color").value=fill,document.querySelector("#w_b_edit_icon_fill_color_wrap button.wp-color-result").style.background=fill,document.getElementById("w_b_edit_icon_stroke_color").value=stroke,document.querySelector("#w_b_edit_icon_stroke_color_wrap button.wp-color-result").style.background=stroke,document.getElementById("w_b_edit_icon_stroke_width").value=stroke_width),""!==fill&&-1===svg.indexOf("fill=")&&(svg=word_balloon_block_svg_icon_add_component("fill",svg)),""!==stroke&&-1===svg.indexOf("stroke=")&&(svg=word_balloon_block_svg_icon_add_component("stroke",svg)),""!==stroke_width&&-1===svg.indexOf("stroke-width=")&&(svg=word_balloon_block_svg_icon_add_component("stroke-width",svg)),svg=(svg=(svg=svg.replace(/fill=".*?"/g,'fill="'+fill+'"')).replace(/stroke=".*?"/g,'stroke="'+stroke+'"')).replace(/stroke-width=".*?"/g,'stroke-width="'+stroke_width+'"'),document.getElementById("w_b_icon_svg").src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(svg))),word_balloon_change_icon_size(),word_balloon_change_icon_position(),word_balloon_change_icon_effect(),word_balloon_change_icon_filter(),word_balloon_change_icon_flip(),document.getElementById("icon_effect_duration")&&word_balloon_effect_duration_change("icon",document.getElementById("icon_effect_duration").value)}},x.open("GET",document.getElementById("w_b_wordballoon_url").getAttribute("data-w_b_url")+"/icon/"+icon+".svg",!0),x.send()}else document.getElementById("w_b_icon_svg").src="",document.getElementById("w_b_edit_icon_fill_color")&&(document.getElementById("w_b_edit_icon_fill_color").value="",document.querySelector("#w_b_edit_icon_fill_color_wrap button.wp-color-result").style.background="",document.getElementById("w_b_edit_icon_stroke_color").value="",document.querySelector("#w_b_edit_icon_stroke_color_wrap button.wp-color-result").style.background="",document.getElementById("w_b_edit_icon_stroke_width").value="")}function word_balloon_change_icon_size(){var w_b_icon=document.getElementById("w_b_icon"),icon_size=document.getElementById("w_b_icon_custom_size").getAttribute("data-size_"+word_balloon_get_icon_size());w_b_icon.style.width=icon_size+"%",w_b_icon.style.height=icon_size+"%"}function word_balloon_change_icon_position(){var icon_position=word_balloon_get_icon_position(),w_b_icon=document.getElementById("w_b_icon"),Classes=new Array;(Classes=["w_b_icon_L","w_b_icon_HC","w_b_icon_VC","w_b_icon_R","w_b_icon_T","w_b_icon_B"]).forEach((function(target){w_b_icon.classList.remove(target)})),"top_left"!==icon_position&&"bottom_left"!==icon_position&&"center_left"!==icon_position||w_b_icon.classList.add("w_b_icon_L"),"top_center"!==icon_position&&"bottom_center"!==icon_position&&"center"!==icon_position||w_b_icon.classList.add("w_b_icon_HC"),"center_left"!==icon_position&&"center_right"!==icon_position&&"center"!==icon_position||w_b_icon.classList.add("w_b_icon_VC"),"top_right"!==icon_position&&"bottom_right"!==icon_position&&"center_right"!==icon_position||w_b_icon.classList.add("w_b_icon_R"),"top_left"!==icon_position&&"top_right"!==icon_position&&"top_center"!==icon_position||w_b_icon.classList.add("w_b_icon_T"),"bottom_left"!==icon_position&&"bottom_right"!==icon_position&&"bottom_center"!==icon_position||w_b_icon.classList.add("w_b_icon_B")}function word_balloon_change_icon_flip(){var w_b_icon_svg=document.getElementById("w_b_icon_svg");w_b_icon_svg.classList.remove("w_b_flip_h"),w_b_icon_svg.classList.remove("w_b_flip_v"),w_b_icon_svg.classList.remove("w_b_flip_hv"),document.getElementById("w_b_icon_flip_h").checked&&document.getElementById("w_b_icon_flip_v").checked?w_b_icon_svg.classList.add("w_b_flip_hv"):document.getElementById("w_b_icon_flip_h").checked?w_b_icon_svg.classList.add("w_b_flip_h"):document.getElementById("w_b_icon_flip_v").checked&&w_b_icon_svg.classList.add("w_b_flip_v")}function word_balloon_change_icon_color(){var icon=word_balloon_get_icon_type();if(""!==icon){var x=new XMLHttpRequest;x.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var svg=x.responseText,icon_data=document.getElementById("custom_icon_"+icon),fill=icon_data.getAttribute("data-fill"),stroke=icon_data.getAttribute("data-stroke"),stroke_width=icon_data.getAttribute("data-stroke_width");document.getElementById("w_b_edit_icon_fill_color")&&(""!==document.getElementById("w_b_edit_icon_fill_color").value&&(fill=document.getElementById("w_b_edit_icon_fill_color").value),""!==document.getElementById("w_b_edit_icon_stroke_color").value&&(stroke=document.getElementById("w_b_edit_icon_stroke_color").value),""!==document.getElementById("w_b_edit_icon_stroke_width").value&&(stroke_width=document.getElementById("w_b_edit_icon_stroke_width").value)),svg=(svg=(svg=svg.replace(/fill=".*?"/g,'fill="'+fill+'"')).replace(/stroke=".*?"/g,'stroke="'+stroke+'"')).replace(/stroke-width=".*?"/g,'stroke-width="'+stroke_width+'"'),document.getElementById("w_b_icon_svg").src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(svg)))}},x.open("GET",document.getElementById("w_b_wordballoon_url").getAttribute("data-w_b_url")+"/icon/"+icon+".svg",!0),x.send()}}function word_balloon_add_icon_svg_component(type,svg){return(svg=(svg=svg.replace(/<path/g,"<path "+type+'=""')).replace(/<ellipse/g,"<ellipse "+type+'=""')).replace(/<polygon/g,"<polygon "+type+'=""')}