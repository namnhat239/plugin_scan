!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=334)}({107:function(e,t,n){var r=n(64);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},108:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},109:function(e,t,n){var r=n(64);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},110:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},111:function(e,t,n){"use strict";var r=n(145);n.o(r,"upgradeModal")&&n.d(t,"upgradeModal",(function(){return r.upgradeModal})),n(24);var a=n(146);n.d(t,"upgradeModal",(function(){return a.a}))},13:function(e,t,n){"use strict";function r(e){"complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",e):e()}n.d(t,"a",(function(){return r}))},14:function(e,t){e.exports=jQuery},145:function(e,t){Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.isSafeInteger=Number.isSafeInteger||function(e){return Number.isInteger(e)&&Math.abs(e)<=Number.MAX_SAFE_INTEGER},Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=9007199254740991)},146:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(5),a=n.n(r);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(t){var n=t.title,r=t.description,a=t.url,i=t.purchasedUrl,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(".simpay-upgrade-modal").dialog(o({position:{my:"center",at:"center",of:window},modal:!0,width:600,resizable:!1,draggable:!1,open:function(){var t=e(this);t.parent().find(".ui-dialog-titlebar").css({borderBottom:0}),t.find(".simpay-upgrade-modal__title").html(n),t.find(".simpay-upgrade-modal__description").html(r),t.find(".simpay-upgrade-modal__upgrade-url").attr("href",a),t.find(".simpay-upgrade-modal__upgrade-purchased-url").attr("href",i)}},c))}}).call(this,n(14))},147:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(13);function a(e,t){var n=document.getElementById("simpay-test-mode-toggle-notice");if(n)if(e!==t){var r=document.getElementById("simpay-toggle-notice-status"),a=document.getElementById("simpay-toggle-notice-status-link");n.style.display="block",r&&a&&(r.innerHTML="<strong>"+r.dataset[e]+"</strong>",a.href=a.dataset[e])}else n.style.display="none"}function i(){var t=document.querySelectorAll(".simpay-disconnect-link");if(t){var n=simpayAdmin.i18n,r=n.disconnectConfirm,a=n.disconnectCancel;t.forEach((function(t){t.addEventListener("click",(function(n){n.preventDefault(),e(".simpay-disconnect-confirm").dialog({resizable:!1,height:"auto",width:400,modal:!0,draggable:!1,open:function(){e(".ui-dialog-buttonset .ui-button").removeClass("ui-button").last().css({marginLeft:"10px"}).focus()},buttons:[{text:a,click:function(){e(this).dialog("close")},class:"button button-secondary"},{text:r,click:function(){window.location.href=t.href},class:"button button-primary"}]})}))}))}}Object(r.a)((function(){var e;(e=document.getElementById("simpay-stripe-account-info"))&&wp.ajax.send("simpay_stripe_connect_account_information",{data:{nonce:e.dataset.nonce},success:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block","simpay-stripe-activated-account-actions"===t.actions?e.classList.add("notice-info"):e.classList.add("notice-warning");var n=document.getElementById(t.actions);n&&(n.style.display="block"),i()},error:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block",e.classList.add("notice-error");var n=document.getElementById(t.actions);n&&(n.style.display="block",i())}})}))}).call(this,n(14))},16:function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},19:function(e,t,n){e.exports=n(63)},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return v}));var r=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},a=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},i=function(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(a(t)&&r(n))if("function"==typeof i)if("number"==typeof o){var c={callback:i,priority:o,namespace:n};if(e[t]){var s,u=e[t].handlers;for(s=u.length;s>0&&!(o>=u[s-1].priority);s--);s===u.length?u[s]=c:u.splice(s,0,c),(e.__current||[]).forEach((function(e){e.name===t&&e.currentIndex>=s&&e.currentIndex++}))}else e[t]={handlers:[c],runs:0};"hookAdded"!==t&&y("hookAdded",t,n,i,o)}else console.error("If specified, the hook priority must be a number.");else console.error("The hook callback must be a function.")}},o=function(e,t){return function(n,i){if(a(n)&&(t||r(i))){if(!e[n])return 0;var o=0;if(t)o=e[n].handlers.length,e[n]={runs:e[n].runs,handlers:[]};else for(var c=e[n].handlers,s=function(t){c[t].namespace===i&&(c.splice(t,1),o++,(e.__current||[]).forEach((function(e){e.name===n&&e.currentIndex>=t&&e.currentIndex--})))},u=c.length-1;u>=0;u--)s(u);return"hookRemoved"!==n&&y("hookRemoved",n,i),o}}},c=function(e){return function(t,n){return void 0!==n?t in e&&e[t].handlers.some((function(e){return e.namespace===n})):t in e}},s=function(e,t){return function(n){e[n]||(e[n]={handlers:[],runs:0}),e[n].runs++;for(var r=e[n].handlers,a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];if(!r||!r.length)return t?i[0]:void 0;var c={name:n,currentIndex:0};for(e.__current.push(c);c.currentIndex<r.length;){var s=r[c.currentIndex],u=s.callback.apply(null,i);t&&(i[0]=u),c.currentIndex++}return e.__current.pop(),t?i[0]:void 0}},u=function(e){return function(){return e.__current&&e.__current.length?e.__current[e.__current.length-1].name:null}},l=function(e){return function(t){return void 0===t?void 0!==e.__current[0]:!!e.__current[0]&&t===e.__current[0].name}},d=function(e){return function(t){if(a(t))return e[t]&&e[t].runs?e[t].runs:0}},p=function(){var e=Object.create(null),t=Object.create(null);return e.__current=[],t.__current=[],{addAction:i(e),addFilter:i(t),removeAction:o(e),removeFilter:o(t),hasAction:c(e),hasFilter:c(t),removeAllActions:o(e,!0),removeAllFilters:o(t,!0),doAction:s(e),applyFilters:s(t,!0),currentAction:u(e),currentFilter:u(t),doingAction:l(e),doingFilter:l(t),didAction:d(e),didFilter:d(t),actions:e,filters:t}},f=p(),y=(f.addAction,f.addFilter,f.removeAction,f.removeFilter,f.hasAction,f.hasFilter,f.removeAllActions,f.removeAllFilters,f.doAction),m=(f.applyFilters,f.currentAction,f.currentFilter,f.doingAction,f.doingFilter,f.didAction,f.didFilter,f.actions,f.filters,p()),h=m.addAction,v=(m.addFilter,m.doAction);m.applyFilters,t.b=m},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return c}));var r={};n.r(r),n.d(r,"create",(function(){return m}));var a={};n.r(a),n.d(a,"create",(function(){return g}));var i={};n.r(i),n.d(i,"create",(function(){return w}));var o={};n.r(o),n.d(o,"create",(function(){return k}));var c={};n.r(c),n.d(c,"create",(function(){return E})),n.d(c,"updatePaymentMethod",(function(){return L}));var s=n(6),u=n(5),l=n.n(u),d=n(8),p=n.n(d);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.state,a=t.__unstableLegacyFormData;return Object(s.a)("v2/customer",y({form_values:p()(t[0],{hash:!0}),form_data:JSON.stringify(y(y({},a),r)),form_id:n},e))}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.state,a=t.__unstableLegacyFormData;return Object(s.a)("v2/paymentintent/create",v({form_values:p()(t[0],{hash:!0}),form_data:JSON.stringify(v(v({},a),r)),form_id:n},e))}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.state,a=t.__unstableLegacyFormData;return Object(s.a)("v2/checkout-session",_({form_values:p()(t[0],{hash:!0}),form_data:JSON.stringify(_(_({},a),r)),form_id:n},e))}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.state;return Object(s.a)("v2/setupintent/create",x({form_values:p()(t[0],{hash:!0}),form_data:JSON.stringify(r),form_id:n},e))}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.state,a=t.__unstableLegacyFormData;return Object(s.a)("v2/subscription",j({form_values:p()(t[0],{hash:!0}),form_data:JSON.stringify(j(j({},a),r)),form_id:n},e))}function L(e,t,n,r,a){return Object(s.a)("v2/subscription/payment_method/".concat(n,"/").concat(e),{customer_nonce:t,form_values:a,form_id:r})}},334:function(e,t,n){"use strict";n.r(t),function(e){var t=n(23),r=(n(335),n(336),n(147));n(337),n(338),n(341),n(342),window.wpsp=window.wpsp||{hooks:t.b};var a,i,o,c={};c={init:function(){i=a(document.body),o=i.find("#simpay-form-settings"),this.handleMetaboxTabClick(),window.postboxes&&window.postboxes.handle_click&&o.on("click",".postbox .simpay-hndle, .postbox .simpay-handlediv",window.postboxes.handle_click),["_amount_type","_success_redirect_type","_subscription_type","_subscription_custom_amount","_form_display_type",".simpay-total-amount-label-recurring",".simpay-total-amount-label-tax",".simpay-shipping-address",".simpay-text-multiline",".simpay-dropdown-type",".simpay-radio-type",".simpay-price-enable-custom",".simpay-price-type input"].forEach((function(e){var t=a(e),n=!1;"."!==e.substring(0,1)?t='input[name="'.concat(e,'"]'):(t=e,n=!0),a("#simpay-form-settings").on("change",t,(function(){var t=a("#simpay-form-settings");!0===n&&(t=a(this).closest(".simpay-field-data"));var r=a(this).val();a(this).is(":checkbox")&&(r=a(this).is(":checked")?"yes":"no"),t.find(a('.simpay-show-if[data-if="'.concat(e,'"]'))).each((function(){var e=a(this),t=e.data("is");e.hide(),t.includes(r)&&e.show().css("display","block")}))})),a(t).filter(":checked").trigger("change")})),t.b.addAction("settings.toggleTestMode","wpsp/settings/stripe-connect",r.a),o.on("click.simpayTabLink",".simpay-tab-link",(function(e){e.preventDefault(),c.handleInternalLinkToTabClicks(a(this))})),o.on("click.simpayImagePreview",".simpay-remove-image-preview",(function(e){c.handleRemoveImagePreviewClick(e)})),this.setupChosen(),this.addMediaFields(),this.stripeConnect();var e=a(".simpay-payment-modes");e.length&&e.find("input").each((function(){var t=a(this);e.hasClass("simpay-payment-mode--"+t.val())||t.attr("disabled",!0)})),i.trigger("simpayAdminInit")},handleRemoveImagePreviewClick:function(e){e.preventDefault(),o.find(".simpay-image-preview-wrap").hide(),o.find("#_image_url").val("")},addMediaFields:function(){var e;a(".simpay-media-uploader").on("click",(function(t){t.preventDefault(),window.simpayMediaUploaderInputField=a(this),e||(e=wp.media.frames.file_frame=wp.media({title:spGeneral.i18n.mediaTitle,button:{text:spGeneral.i18n.mediaButtonText},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON(),n=a("#_image_url"),r="id"===n.data("fvalue")?t.id:t.url;a(".simpay-image-preview-wrap").show(),a(".simpay-image-preview").prop("src",r),n.val(r)})),e.open()}))},setupChosen:function(){var e=a(".simpay-chosen-select, .simpay-chosen-search");e.chosen({disable_search_threshold:20}),e.chosen()},handleMetaboxTabClick:function(){var e=a("ul.simpay-tabs a"),t=a("div.simpay-panel"),n=e.parents("li");e.on("click",(function(e){e.preventDefault();var r=a(this).parent(),i=a(a(this).attr("href")),o=a(this).attr("href");history.pushState(null,null,o),setTimeout((function(){window.scrollTo(0,0)}),1),a('[name="simpay_form_settings_tab"]').val(o),a(".simpay-panels > .spinner").hide(),n.removeClass("active"),r.addClass("active"),t.addClass("simpay-panel-hidden"),i.removeClass("simpay-panel-hidden")}));var r="#form-display-options-settings-panel";location.hash.length&&(r=location.hash);var i=a('ul.simpay-tabs a[href="'+r+'"]');a('[name="simpay_form_settings_tab"]').val(r),i.length&&i.click()},stripeConnect:function(){var e="tr:nth-child(2), tr:nth-child(3), tr:nth-child(4), tr:nth-child(5)";a(".simpay-settings.stripe-account .form-table").find(e).hide(),a("#wpsp-api-keys-row-reveal button").on("click",(function(t){t.preventDefault(),a(".simpay-settings.stripe-account .form-table").find(e).show(),a("#wpsp-api-keys-row-hide").show(),a(this).parent().hide(),a(".wpsp-manual-key-warning").show()})),a("#wpsp-api-keys-row-hide button").on("click",(function(t){t.preventDefault(),a(".simpay-settings.stripe-account .form-table").find(e).hide(),a("#wpsp-api-keys-row-reveal").show(),a(this).parent().hide(),a(".wpsp-manual-key-warning").hide()}))},handleInternalLinkToTabClicks:function(e){var t=e.data("show-tab");i.find("."+t+"-tab a").click()}},(a=e)(document).ready((function(e){c.init()}))}.call(this,n(14))},335:function(e,t,n){"use strict";var r=n(13),a=simpayAdminSettingToggles||[];function i(e){var t=e.id,n=(e.value,e.toggles,document.querySelector(".simpay-settings-".concat(t)));if(!n)return{};var r=n.querySelector("input");r||(r=n.querySelector("select"));var a=r.value;return"checkbox"===r.type&&(a=!0===r.checked?"yes":"no"),{setting:r,currentValue:a}}function o(e){var t=e.id,n=e.value,r=e.toggles,c=i(e),s=(c.setting,c.currentValue);"none"!==document.querySelector(".simpay-settings-".concat(t)).style.display&&(r.map((function(e){return document.querySelector(".simpay-settings-".concat(e))})).forEach((function(e){e&&(e.style.display=s===n?"table-row":"none")})),r.forEach((function(e){var t=_.find(a,{id:e});t&&o(t)})))}Object(r.a)((function(){a.forEach((function(e){o(e),i(e).setting.addEventListener("change",(function(){return o(e)}))}))}))},336:function(e,t,n){"use strict";var r=n(13);Object(r.a)((function(){var e=window.wpsp.hooks,t=document.querySelectorAll('[name="simpay_settings[test_mode]"]');if(0!==t.length){var n="enabled"===document.querySelector('[name="simpay_settings[test_mode]"]:checked').value?"test":"live";e.doAction("settings.toggleTestMode",n,n),_.each(t,(function(t){return t.addEventListener("change",(function(t){var r="enabled"===t.target.value?"test":"live";e.doAction("settings.toggleTestMode",r,n)}))}))}}))},337:function(e,t,n){"use strict";var r=n(13);Object(r.a)((function(){var e=document.querySelector(".simpay-recaptcha-feedback");if(e){var t=simpayGoogleRecaptcha,n=t.siteKey,r=t.i18n;""!==n&&grecaptcha.ready((function(){var e=document.querySelector(".grecaptcha-badge");e&&(e.style.display="none");try{grecaptcha.execute(n,{action:"simple_pay_admin_test"}).then((function(e){wp.ajax.send("simpay_validate_recaptcha_source",{data:{token:e,recaptcha_action:"simple_pay_admin_test"},error:a})})).catch(a)}catch(e){a()}}))}function a(){e.style.display="block",e.classList.add("notice-error"),e.querySelector("p").innerText=r.invalid}}))},338:function(e,t,n){"use strict";n(339),n(340)},339:function(e,t,n){"use strict";(function(e){var t=n(8),r=n.n(t),a=n(13);Object(a.a)((function(){var t,n=document.querySelector(".post-type-simple-pay #post");if(n){var a=r()(n,{hash:!0});delete a.simpay_form_settings_tab,function(t){function n(e){var n=r()(document.querySelector(".post-type-simple-pay form#post"),{hash:!0});if(delete n.simpay_form_settings_tab,delete n.simpay_save_preview,JSON.stringify(n)!==t)return e.preventDefault(),simpayAdmin.i18n.leavePageConfirm}window.addEventListener("beforeunload",n),window.onbeforeunload=n,e(".post-type-simple-pay form#post").off("submit").on("submit",(function(){window.removeEventListener("beforeunload",n),window.onbeforeunload=null}))}(JSON.stringify(a)),function(){var e=document.querySelector(".simpay-recaptcha-payment-form-feedback");if(e){var t=document.querySelector(".simpay-recaptcha-payment-form-description"),n=simpayGoogleRecaptcha,r=n.siteKey,a=n.i18n;if(t.style.display="none",""===r)return i();grecaptcha.ready((function(){var e=document.querySelector(".grecaptcha-badge");e&&(e.style.display="none");try{grecaptcha.execute(r,{action:"simple_pay_admin_test"}).then((function(e){wp.ajax.send("simpay_validate_recaptcha_source",{data:{token:e,recaptcha_action:"simple_pay_admin_test"},success:o,error:i})})).catch(i)}catch(e){i()}}))}function i(){e.style.color="#b32d2e",e.style.display="inline",e.innerHTML=a.disabled,t.style.display="inline-block"}function o(){e.style.color="green",e.style.display="inline",e.innerHTML=a.enabled,t.style.display="inline-block"}}(),(t=document.querySelector("#_company_name"))&&(t.addEventListener("blur",(function(){0===t.value.length?(t.nextElementSibling.classList.remove("hidden"),t.value=simpayAdmin.siteTitle):t.nextElementSibling.classList.add("hidden")})),t.addEventListener("focus",(function(){0!==t.value.length&&t.nextElementSibling.classList.add("hidden")})))}}))}).call(this,n(14))},340:function(e,t,n){"use strict";(function(e,t){var r=n(57),a=n.n(r),i=n(13),o=n(111);function c(e){var t=e.querySelector(".simpay-price-label-display"),n=e.querySelector(".simpay-price-label"),r=spGeneral.strings,a=r.recurringIntervalDisplay,i=r.customAmountLabel;if(""!==n.value)t.innerHTML=n.value;else{var o,c=e.querySelector(".simpay-price-currency"),s=e.querySelector(".simpay-price-amount"),u=e.querySelector(".simpay-price-amount-type"),l=e.querySelector(".simpay-price-custom-amount input"),d=e.querySelector(".simpay-price-enable-custom-amount"),p=spGeneral.strings,f=p.currencyPosition,y=p.recurringIntervals,m=c.options[c.selectedIndex].dataset.symbol;switch(o=!0===d.checked?l.value:s.value,f){case"left":o="".concat(m).concat(o);break;case"left_space":o="".concat(m," ").concat(o);break;case"right":o="".concat(o).concat(m);break;case"right_space":o="".concat(o," ").concat(m)}if(!0===d.checked&&(o=i.replace("%s",o)),"recurring"===u.value){var h=e.querySelector(".simpay-price-recurring-interval"),v=e.querySelector(".simpay-price-recurring-interval-count"),g=y[h.options[h.selectedIndex].value];o=a.replace("%1$s",o).replace("%2$s",v.value).replace("%3$s","1"===v.value?g[0]:g[1])}t.innerHTML=o}}function s(e,t){e.querySelector(".simpay-price-recurring-settings").style.display=t.checked?"table":"none"}function u(e){var t=e.querySelector(".simpay-price-recurring-interval"),n=e.querySelector(".simpay-price-recurring-interval-count"),r=parseInt(n.value);switch(t.options[t.selectedIndex].value){case"day":r>365&&(n.value=365);break;case"week":r>52&&(n.value=52);break;case"month":r>12&&(n.value=12);break;case"year":r>1&&(n.value=1)}var i=JSON.parse(t.dataset.intervals);a()(t.options).forEach((function(e,r){var a=e.value;t.options[r].text=1===parseInt(n.value)?i[a][0]:i[a][1]}))}function l(){var e=document.querySelectorAll(".simpay-price");_.each(e,(function(e){var t=e.querySelector(".simpay-price-amount-type").value;e.querySelector(".simpay-price-label").addEventListener("keyup",(function(){return c(e)})),c(e),e.querySelector(".simpay-price-currency").addEventListener("change",(function(){!function(e){var t=e.querySelector(".simpay-price-currency"),n=t.options[t.selectedIndex].dataset.symbol,r=e.querySelectorAll(".simpay-price-currency-symbol");_.each(r,(function(e){return e.innerText=n}))}(e),c(e)}));var n=e.querySelectorAll(".simpay-price-amount-type .button");n.length>0&&_.each(n,(function(t){return t.addEventListener("click",(function(t){t.preventDefault();var n=t.target.dataset,r=n.available,a=n.upgradeTitle,i=n.upgradeDescription,s=n.upgradeUrl,u=n.upgradePurchasedUrl;"no"===r?Object(o.upgradeModal)({title:a,description:i,url:s,purchasedUrl:u}):(function(e,t){var n=e.querySelectorAll(".simpay-price-amount-type .button");_.each(n,(function(e){return e.classList.remove("button-primary")}));var r=t.dataset.amountType,a=e.querySelector(".simpay-price-recurring-settings");t.classList.add("button-primary"),a.style.display="recurring"===r?"table":"none";var i=e.querySelector(".simpay-price-recurring-amount-toggle"),o=e.querySelector(".simpay-price-enable-optional-subscription");i.style.display="recurring"===r?"none":"block",o.checked=!1,e.querySelector(".simpay-price-amount-type").value=r}(e,t.target),c(e))}))})),e.querySelector(".simpay-price-amount").addEventListener("keyup",(function(){return c(e)}));var r=e.querySelector(".simpay-price-enable-optional-subscription");r&&(r.addEventListener("click",(function(t){var n=t.target,r=n.dataset,a=r.available,i=r.upgradeTitle,u=r.upgradeDescription,l=r.upgradeUrl,d=r.upgradePurchasedUrl;"no"===a?(n.checked=!1,t.preventDefault(),Object(o.upgradeModal)({title:i,description:u,url:l,purchasedUrl:d})):(s(e,n),c(e))})),"recurring"!==t&&s(e,r)),e.querySelector(".simpay-price-enable-custom-amount").addEventListener("click",(function(){!function(e){var t=e.querySelector(".simpay-price-custom-amount");t.style.display="none"===t.style.display?"block":"none"}(e),c(e)})),e.querySelector(".simpay-price-recurring-interval").addEventListener("change",(function(){c(e),u(e)}));var a=e.querySelector(".simpay-price-recurring-interval-count");u(e),a.addEventListener("keyup",(function(){u(e),c(e)})),a.addEventListener("change",(function(){u(e),c(e)}));var i=e.querySelector(".simpay-price-legacy-setting-toggle");i&&i.addEventListener("click",(function(t){t.preventDefault(),function(e){var t=e.querySelectorAll(".simpay-price-legacy-setting");_.each(t,(function(e){return e.style.display="block"===e.style.display?"none":"block"}))}(e)})),e.querySelector(".simpay-price-default").addEventListener("change",(function(){return function(e){var t=document.querySelectorAll(".simpay-price-default");_.each(t,(function(e){return e.checked=!1})),e.querySelector(".simpay-price-default").checked=!0}(e)})),e.querySelector(".simpay-price-remove").addEventListener("click",(function(t){t.preventDefault(),function(e){e.remove(),d()}(e)}))}))}function d(){var e=document.querySelectorAll(".simpay-price");document.querySelector(".simpay-price-default:checked")||(e[0].querySelector(".simpay-price-default").checked=!0)}Object(i.a)((function(){var n,r,a;t(".simpay-prices").sortable({items:".simpay-field-metabox",containment:"#simpay-prices",handle:".simpay-hndle",placeholder:"sortable-placeholder",cursor:"move",delay:t(document.body).hasClass("mobile")?200:0,distance:2,tolerance:"pointer",forcePlaceholderSize:!0,opacity:.65,helper:function(e,t){return t.clone().find(":input").attr("name",(function(e,t){return"sort_"+parseInt(1e5*Math.random(),10).toString()+"_"+t})).end()}}),l(),n=document.getElementById("simpay-prices-advanced-toggle"),r=document.getElementById("simpay-prices-advanced"),n&&r&&n.addEventListener("click",(function(e){e.preventDefault(),r.style.display="block"==r.style.display?"none":"block"})),(a=document.getElementById("simpay-prices-advanced-add"))&&a.addEventListener("click",(function(t){var n,r,i,o,c,s;t.preventDefault(),i=(r=(n=a).dataset).nonce,o=r.formId,c=document.getElementById("simpay-prices"),s=document.getElementById("simpay-prices-advanced-plan-id"),n.classList.add("disabled"),wp.ajax.send("simpay_add_plan",{data:{_wpnonce:i,form_id:o,plan_id:s.value},success:function(t){e(c).append(t),l(),document.getElementById("simpay-prices-advanced").style.display="none",s.value="",n.classList.remove("disabled")},error:function(e){var t=e.message;alert(t),n.classList.remove("disabled")}})})),function(){var t=document.getElementById("simpay-add-price");t&&t.addEventListener("click",(function(n){var r,a,i,o,c;n.preventDefault(),i=(a=(r=t).dataset).nonce,o=a.formId,c=document.getElementById("simpay-prices"),r.classList.add("disabled"),wp.ajax.send("simpay_add_price",{data:{_wpnonce:i,form_id:o},success:function(t){e(c).append(t),l(),d(),r.classList.remove("disabled")},error:function(e){var t=e.message;alert(t),r.classList.remove("disabled")}})}))}()}))}).call(this,n(14),n(14))},341:function(e,t,n){"use strict";(function(e){var t=n(16),r=n.n(t),a=n(13),i='<i class="fa fa-toggle-on fa-flip-horizontal" aria-hidden="true"></i>',o='<i class="fa fa-toggle-on" aria-hidden="true"></i>',c=simpayAdmin,s=c.nonce,u=c.ajaxUrl,l=c.i18n,d=l.addonActivated,p=l.addonActivate,f=l.addonActive,y=l.addonDeactivate,m=l.addonInactive,h=l.addonInstall,v=l.addonError,g=l.pluginError;function b(t){t.preventDefault();var n,a,c,l,b,_,w=e(t.target);if(w.hasClass("status-go-to-url"))window.open(w.attr("data-plugin"),"_blank");else{var O=w.attr("data-type");if(w.prop("disabled",!0).addClass("loading"),w.html('<i class="fa fa-spinner fa-spin" aria-hidden="true"></i>'),w.hasClass("status-active"))n="deactivate",a="status-installed","plugin"===O&&(a+=" button button-secondary"),c=m,l=p,b=y,"addon"===O&&(l=i+l,b=o+b);else if(w.hasClass("status-installed"))n="activate",a="status-active","plugin"===O&&(a+=" button button-secondary disabled"),c=f,l=y,"addon"===O?(l=o+l,b=i+p):"plugin"===O&&(l=d,b=p);else{if(!w.hasClass("status-missing"))return;n="install",a="status-active","plugin"===O&&(a+=" button disabled"),c=f,l=d,b='<i class="fa fa-cloud-download" aria-hidden="true"></i>',"addon"===O&&(l=i+y,b+=h)}var x=w.closest(".simpay-addon");!function(t,n,r,a){var i={activate:"simpay_activate_addon",install:"simpay_install_addon",deactivate:"simpay_deactivate_addon"}[n];if(i){var o={action:i,nonce:s,plugin:t,type:r};e.post(u,o,a).fail((function(e){console.log(e.responseText)}))}}(w.attr("data-plugin"),n,O,(function(e){e.success?("install"===n?(w.attr("data-plugin",e.data.basename),_=e.data.msg,e.data.is_activated||(c=m,l="plugin"===O?p:i+p,a="plugin"===O?"status-installed button button-secondary":"status-installed")):_=e.data,x.find(".simpay-addon__actions").append('<div class="msg success">'+_+"</div>"),x.find("span.status-label").removeClass("status-active status-installed status-missing").addClass(a).removeClass("button button-primary button-secondary disabled").text(c),w.removeClass("status-active status-installed status-missing").removeClass("button button-primary button-secondary disabled").addClass(a).html(l)):("object"===r()(e.data)?"addon"===O?x.find(".simpay-addon__actions").append('<div class="msg error">'+v+"</div>"):x.find(".simpay-addon__actions").append('<div class="msg error">'+g+"</div>"):x.find(".simpay-addon__actions").append('<div class="msg error">'+e.data+"</div>"),"install"===n&&"plugin"===O&&w.addClass("status-go-to-url").removeClass("status-missing"),w.html(b)),w.prop("disabled",!1).removeClass("loading"),setTimeout((function(){x.find(".msg").remove()}),3e3)}))}}Object(a.a)((function(){document.querySelector(".simpay-addons")&&document.querySelectorAll(".simpay-addon").forEach((function(e){e.querySelector("button").addEventListener("click",b)}))}))}).call(this,n(14))},342:function(e,t,n){"use strict";var r=n(13);Object(r.a)((function(){var e=new ClipboardJS(".simpay-copy-button");e.on("success",(function(t){var n=t.trigger,r=n.dataset.copied,a=n.innerHTML;clearTimeout(i),n.innerHTML=r,n.classList.contains("button-secondary")&&(n.style.color="green",n.style.borderColor="green"),t.clearSelection();var i=setTimeout((function(){n.innerHTML=a,n.classList.contains("button-secondary")&&(n.style.color="",n.style.borderColor=""),e.clipboardAction.fakeElem&&e.clipboardAction.removeFake&&e.clipboardAction.removeFake()}),3e3);wp.a11y.speak(r)}))}))},35:function(e,t){function n(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function c(e){n(o,a,i,c,s,"next",e)}function s(e){n(o,a,i,c,s,"throw",e)}c(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},5:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},57:function(e,t,n){var r=n(107),a=n(108),i=n(109),o=n(110);e.exports=function(e){return r(e)||a(e)||i(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},6:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(35),a=n.n(r),i=n(19),o=n.n(i);function c(_x,e){return s.apply(this,arguments)}function s(){return(s=a()(o.a.mark((function t(n,r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ajax({data:r,method:"POST",url:"".concat(wpApiSettings.root,"wpsp/").concat(n),beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",wpApiSettings.nonce)}});case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),t.t0.responseJSON;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}}).call(this,n(14))},63:function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),o=new x(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return{value:void 0,done:!0}}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=_(o,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function d(){}function p(){}function f(){}var y={};c(y,a,(function(){return this}));var m=Object.getPrototypeOf,h=m&&m(m(k([])));h&&h!==t&&n.call(h,a)&&(y=h);var v=f.prototype=d.prototype=Object.create(y);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(a,i){function o(){return new t((function(r,o){!function r(a,i,o,c){var s=u(e[a],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,c)}),(function(e){r("throw",e,o,c)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,c)}))}c(s.arg)}(a,i,r,o)}))}return r=r?r.then(o,o):o()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=f,c(v,"constructor",f),c(f,"constructor",p),p.displayName=c(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new b(s(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(v),c(v,o,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},64:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e,t){var n=/^(?:submit|button|image|reset|file)$/i,r=/^(?:input|select|textarea|keygen)/i,a=/(\[[^\[\]]*\])/g;function i(e,t,n){if(t.match(a))!function e(t,n,r){if(0===n.length)return r;var a=n.shift(),i=a.match(/^\[(.+?)\]$/);if("[]"===a)return t=t||[],Array.isArray(t)?t.push(e(null,n,r)):(t._values=t._values||[],t._values.push(e(null,n,r))),t;if(i){var o=i[1],c=+o;isNaN(c)?(t=t||{})[o]=e(t[o],n,r):(t=t||[])[c]=e(t[c],n,r)}else t[a]=e(t[a],n,r);return t}(e,function(e){var t=[],n=new RegExp(a),r=/^([^\[\]]*)/.exec(e);for(r[1]&&t.push(r[1]);null!==(r=n.exec(e));)t.push(r[1]);return t}(t),n);else{var r=e[t];r?(Array.isArray(r)||(e[t]=[r]),e[t].push(n)):e[t]=n}return e}function o(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var a=t.hash?{}:"",c=t.serializer||(t.hash?i:o),s=e&&e.elements?e.elements:[],u=Object.create(null),l=0;l<s.length;++l){var d=s[l];if((t.disabled||!d.disabled)&&d.name&&r.test(d.nodeName)&&!n.test(d.type)){var p=d.name,f=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(f=void 0),t.empty){if("checkbox"!==d.type||d.checked||(f=""),"radio"===d.type&&(u[d.name]||d.checked?d.checked&&(u[d.name]=!0):u[d.name]=!1),null==f&&"radio"==d.type)continue}else if(!f)continue;if("select-multiple"!==d.type)a=c(a,p,f);else{f=[];for(var y=d.options,m=!1,h=0;h<y.length;++h){var v=y[h],g=t.empty&&!v.value,b=v.value||g;v.selected&&b&&(m=!0,a=t.hash&&"[]"!==p.slice(p.length-2)?c(a,p+"[]",v.value):c(a,p,v.value))}!m&&t.empty&&(a=c(a,p,""))}}}if(t.empty)for(var p in u)u[p]||(a=c(a,p,""));return a}}});