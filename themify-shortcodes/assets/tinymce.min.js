'use strict';tinymce.PluginManager.add("themifyMenu",function(d,l){function h(){var b=d.settings.color_picker_callback;if(b)return function(){var a=this;b.call(d,function(b){a.value(b).fire("change")},a.value())}}function f(b){return{text:b.label,body:{type:b.id},onclick:function(){if(jQuery.isEmptyObject(b.fields)){var a={};a.selectedContent=d.selection.getContent();var k=wp.template("themify-shortcode-"+b.id);d.insertContent(k(a))}else{var g=[];jQuery.each(b.fields,function(b,c){if("colorbox"==
c.type)c.onaction=h();else if("image"==c.type)c={type:"container",label:c.label,layout:"flex",direction:"row",items:[{type:"textbox",name:c.name},{type:"button",text:c.text,onclick:function(){var b=jQuery(this.$el),c=wp.media.frames.file_frame=wp.media({multiple:!1});c.on("select",function(){var a=c.state().get("selection").first().toJSON();b.prev().val(a.url)});c.open()}}]};else if("iconpicker"==c.type){b={type:"container",label:c.label,layout:"flex",direction:"row",items:[{type:"textbox",name:c.name}]};
let a=window.Themify_Icons;document.getElementById("tb_iframe")&&!a&&(a=document.getElementById("tb_iframe").contentWindow.Themify_Icons);a&&b.items.push({type:"button",text:c.text,onclick:function(){var b=jQuery(this.$el);b.hasClass("themify_fa_toggle")||b.addClass("themify_fa_toggle");a.target=b.prev();a.showLightbox(a.target.val())}});c=b}g.push(c)});d.windowManager.open({title:b.label,body:g,onSubmit:function(a){a=this.toJSON();a.selectedContent=d.selection.getContent();var c=wp.template("themify-shortcode-"+
b.id);d.insertContent(c(a))}})}}}}var e=[];jQuery.each(themifyEditor.shortcodes,function(b,a){a.id=b;if("object"==typeof a.menu){var d=[];jQuery.each(a.menu,function(b,a){a.id=b;d.push(f(a))});e.push({text:a.label,menu:d})}else e.push(f(a))});d.addButton("btnthemifyMenu",{type:"menubutton",text:"",image:themifyEditor.editor.icon,tooltip:themifyEditor.editor.menuTooltip,menu:e})});
